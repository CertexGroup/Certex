<script>

function post(path, params, method) {
    method = method || "post"; // Set method to post by default if not specified.

    // The rest of this code assumes you are not using a library.
    // It can be made less wordy if you use one.
    var form = document.createElement("form");
    form.setAttribute("method", method);
    form.setAttribute("action", path);

    for(var key in params) {
        if(params.hasOwnProperty(key)) {
            var hiddenField = document.createElement("input");
            hiddenField.setAttribute("type", "hidden");
            hiddenField.setAttribute("name", key);
            hiddenField.setAttribute("value", params[key]);

            form.appendChild(hiddenField);
         }
    }

    document.body.appendChild(form);
    form.submit();
}

function validateForm() {
    var valid = true;
    var x = document.forms["registerForm"]["receiverKey"].value;
    var y = document.forms["registerForm"]["title"].value;
    var z = document.forms["registerForm"]["date"].value;
    if (x == null || x == "") {
        alert("Receiver key must be filled out");
        valid = false;
    }
    if (y == null || y == "") {
        alert("Title must be filled out");
        valid = false;
    }
    if (z == null || z == "") {
        alert("Date must be filled out");
        valid = false;
    }
    if(!valid){
      return false;
    }
    return true;
}

function tierionPost(form){
  if(validateForm()){
    var path = "https://tierion.com/form/submit";
    var dataKey = "vzrEFFrDUUCIvJdEugZq8A";
    //reading values from form
    var receiverKeyVal = form.receiverKey.value;
    var authorityKeyVal = form.authorityKey.value;
    var titleVal = form.title.value;
    var dateVal = form.date.value;

    //if(confirm("You are about to certificate the public key: " + receiverKeyVal
          //+ " on the title of: " + title + " generated on: " + dateVal)){
      alert(receiverKeyVal + ":" + authorityKeyVal + ":" + titleVal + ":" + dateVal);
    //}
    /*
    post(path, {
        _key: dataKey,
        authorityKey: authorityKeyVal,
        receiverKey: receiverKeyVal,
        title: titleVal,
        date: dateVal});
        */
  }
}

</script>

<form name="registerForm">
  Public key:
  <input type="text" name="receiverKey"><br>
  Title:
  <input type="text" name="title"><br>
  <!--input type="text" name="category"-->
  Date:
  <input type="text" name="date">

  <input type="hidden" value="authKey" name="authorityKey">
  <input type="submit" value="Submit" onClick="tierionPost(this.form)">
</form>
